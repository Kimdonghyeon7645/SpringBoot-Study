# 9-2. CI&CD 적용 2 - Travis CI, S3 연동하기

![image](https://user-images.githubusercontent.com/48408417/111033906-ac6fe400-8456-11eb-9672-6e59fef14bf0.png)  

-> CI&CD 적용이 끝난 최종 구조

## 1. EC2에 IAM 역할 추가

CodeDeploy를 사용하기 전, 배포 대상인 **EC2가 CodeDeploy와 연동되도록 'IAM 역할'** 생성

> ### IAM 역할과 사용자의 차이점
>
> - 역할 : AWS 서비스(EC2, CodeDeploy, SQS 등)에만 할당 가능한 권한
> - 사용자 : **AWS 서비스 외**(로컬PC, IDC 서버 등)에만 사용 가능한 권한

#### IAM 역할 만들기

1. 전처럼 AWS 웹 콘솔에서 *IAM* 검색 -> **IAM 페이지**로 이동
2. IAM 페이지 왼쪽 사이드바 **[역할]** 클릭 -> **[역할 만들기]** 클릭
3. 신뢰할 수 있는 유형의 개체 선택 : **AWS 서비스** 선택
4. 사용 사례 선택 : **EC2** 선택 후, **[다음:권한]** 클릭
5. 정책 : **AmazonEC2RoleforAWSCodeDeploy** 검색 후 선택 -> **[다음:태그]** 클릭
6. 태그는 키:Name, 값:원하는 이름으로 입력 후, **[다음:검토]** 클릭
7. 역할 이름 입력 후, 입력한 값 검토가 끝났으면, **[역할 만들기]** 클릭

#### EC2 서비스에 역할 등록하기

1. EC2 인스턴스 목록으로 이동
2. 본인 인스턴스 오른쪽 클릭 -> **[보안 > IAM 역할 수정]** 선택
3. IAM 역할에 아까 생성한 역할 선택 후, **[저장]** 클릭

역할 선택 후, 해당 **EC2 인스턴스를 재부팅** (그래야 역할이 정상적으로 적용)  



# 6-1. AWS 회원가입, 인스턴스 생성

> #### AWS 회원가입
>
> 해외결제 가능한 Master, Visa 카드가 필요하다.
> (이게 없어서 못했었다 ㅠㅠ... 농협 체크카드 중에 Visa카드 있으니 참고)

### 1. EC2 인스턴스 생성

**EC2(Elastic Compute Cloud)** : 성능, 용량을 유동적으로 쓸 수 있는 AWS 제공 서버  
(AWS에서 리눅스/윈도우 서버 쓴다하면 이 EC2를 말함)

> #### EC2는 뭘 줄인 말일까
>
> Elastic Compute Cloud를 줄이면 ECC인데,  
> AWS에선 앞글자가 중복되면 숫자로 표시해 부른다. 그래서 ECC -> EC2가 됬다.   
> 비슷한 예론, 온라인 스토리지인 S3(Simple Storage Service)가 있다.

### 2. EC2 프리티어 제한

1. 사양 제한 : t2.micro 
    
     vCPU 1코어, 메모리 1GB(vCPU 성능 = CPU 성능의 절반)
2. 시간 제한 : 월 750시간(초과시 비용 생김)  
    
    '1달 = 744시간' 이라서, EC2가 1개면 1달 내내 구동 가능
    
### 3. 리전(=AWS 서비스가 구동될 지역) 확인

AWS는 도시별로 클라우드 센터를 지어 해당 센터의 가상머신들을 사용 가능(=리전)  
-> 실제 서비스될 지역과 리전이 가까울수록 빠르다.  
-> **보통 기본값이 오아이주 인데, 서울로 변경**

## 4. EC2 생성

**EC2 대시보드에서 인스턴스 시작**을 클릭하면, 아래 이미지처럼 7가지 절차가 뜬다.
![image](https://user-images.githubusercontent.com/48408417/110202569-e5cfaf00-7eac-11eb-9a37-42fe2d863925.png)  
  
1. AMI 선택
    > #### AMI(Amazon Machine Image)란
    >
    > AMI : EC2 인스턴스 시작에 필요한 정보를 이미지로 만들어 둔 것  
    > (인스턴스라는 가상머신에 운영체제 등을 설치할려고 구워둔 이미지)

    책에선 국내자료가 많은 **아마존 리눅스 1 AMI**를 선택하라는데,    
    검색하니까 없다!(21년 3월 6일) -> **아마존 리눅스 2 AMI**로 간다.
    
    > #### 센토스 AMI 안쓰고 아마존 리눅스 AMI 쓰는 이유
    > 
    > - 아마존이 개발하기 때문에 지원 쉬움
    > - 레드햇 베이스 -> 써본 사람이면 쉽게 사용 가능 
    > - AWS의 서비스와 상성 좋음
    > - AWS의 독자적인 레포를 사용하기 때문에 yum이 매우 빠름

2. 인스턴스 유형 선택
    인스턴스 유형 : **t2.micro** 선택
    
    > #### 인스턴스 이름의 의미
    >
    > t2는 요금 타입, micro는 사양을 의미
    > t2, t3같은 것은 T 시리즈로, 범용 시리즈라 불리는만큼 다양한 사양을 제공
    > 
    > 이들은 다른 서비스와 달리, **크레딧**이란 CPU를 사용할 수 있는 포인트 개념이 존재
    > 인스턴스 크기에 따라 정해진 비율로 CPU 크레딧을 받는데, 안쓸땐 축적하고, 쓸덴 크레딧을 사용(정해진 사양을 초과하는 트래픽에는 더 크레딧을 적극적으로 사용)  
    > **크레딧을 모두 쓰면 EC2를 더이상 못 씀** (-> 트래픽 높은 서비스는 T 시리즈를 잘 안씀, 활용도가 높아 시작하는 단계에선 T 시리즈 조와용)
    
3. 세부정보 구성
    세부 정보 구성은 연습할 때엔 굳이 필요 없으니 넘어간다.
    네트워크 환경 구성 등 세세한 정보를 다룬다.
    하지만 소규모/개인/공부 라면 굳이 설정할 필요 없다.
스토리지 선택은 서버의 용량을 설정하는 단계이다.
기본값이 8GB이지만, 프리티어 최대치는 30GB 이므로 30GB로 바꿔준다.
태그는 웹 콘솔에 표시될 이름이다.
인스턴스가 여러개 일때, 태그로 검색이나 그룹이 편하기 때문에, 원하는 만큼 등록하면 된다.
보안 그룹은 방화벽을 이야기 한다.
기본적으로는 80포트를 제외하고 허용하지 않는다.
굉장히 중요하다. 만약 모두 열어버린다면 pem 파일(키)가 유출되는 순간, 모든 보안이 뚫리게 되므로, 다음과 같이 설정해 준다.
image-20210119115745928
SSH에 22포트는 터미널로 접속하는 경우인데, 내 아이피로 설정하고, 만약 카페와 같은곳을 가게 되면 그곳의 아이피를 추가하는것이 좋다.
다음을 눌렀을 때 보안 그룹 경고를 하는데, 8080포트를 여는것은 위험하지 않으니 시작하기를 누른다.
pem 파일을 저장할 수 있는데, 절대 유출하면 안된다.
마스터키와 같은 역할이기 때문에, EC2 서버 접속에 필수적인 파일이다.
잘 보관해야 한다.
기본적인 설정
인스턴스 또한 IP가 존재한다.
인스턴스 생성 또는 재시작 시에 새 IP가 할당된다.
즉, 인스턴스 재시작 후에는 접속해야 하는 IP가 변경된다.
그래서 고정 IP를 가지게 하면 편하다.
인스턴스 페이지에서 왼쪽의 탄력적 IP를 선택한다.
새 주소 할당 버튼을 누른다.
할당 버튼을 누른다.
해당 IP와 EC2 주소를 연결해 준다.
생성한 탄력적 IP를 확인한다.
위쪽의 작업 -> 주소연결을 선택한다.
EC2 이름과 UP를 입력하고 연결 버튼을 누른다.
만약 탄력적 IP를 생성하고 EC2에 연결하지 않으면 비용이 발생한다.
꼭 연결해 줘야 한다.
